schema {
  query: Query
  mutation: Mutation
}

type Query {
  # Lookup a given asset by the owner, study name, and asset name.
  asset(
    name: String!
    owner: String!
    study: String!
  ): UserAsset

  # Lookup node by ID.
  node(
    # The ID of the node.
    id: ID!
  ): Node

  # Lookup nodes by a list of IDs.
  nodes(
    # The list of IDs.
    ids: [ID!]!
  ): [Node]!

  relay: Query!

  search(
    # Returns the elements in the list that come after the specified global ID.
    after: String

    # Returns the elements in the list that come before the specified global ID.
    before: String

    # Returns the first n elements form the list.
    first: Int

    # Returns the last n elements form the list.
    last: Int

    # Ordering options for items returned from the connection.
    orderBy: SearchOrder

    # The search string to look for.
    query: String!

    # The types of search items to search for.
    type: SearchType!

    # The ID of the node to search within.
    within: ID
  ): SearchableConnection!

  # Lookup a given study by the owner and study name.
  study(
    # The name of the study.
    name: String!
    # The login field of a user.
    owner: String!
  ): Study

  # Lookup a topic by name.
  topic(
    # The topic's name.
    name: String!
  ): Topic

  # Lookup a user by login. 
  user(
    # The login of the user.
    login: String!
  ): User

  # The currently authenticated user.
  viewer: User!
}

type Mutation {
  # Adds an email to the viewer's account.
  addEmail(input: AddEmailInput!): AddEmailPayload
  # Adds a label to a labelable.
  addLabel(input: AddLabelInput!): AddLabelPayload
  # Adds a comment to a lesson.
  addLessonComment(input: AddLessonCommentInput!): AddLessonCommentPayload

  # Creates a new label.
  createLabel(input: CreateLabelInput!): Label
  # Creates a new lesson.
  createLesson(input: CreateLessonInput!): Lesson
  # Creates a new study.
  createStudy(input: CreateStudyInput!): Study
  # Creates a new user.
  createUser(input: CreateUserInput!): User

  # Deletes an email from the viewer's account.
  deleteEmail(input: DeleteEmailInput!): DeleteEmailPayload
  # Deletes a label from a study.
  deleteLabel(input: DeleteLabelInput!): DeleteLabelPayload
  # Deletes a lesson from a study.
  deleteLesson(input: DeleteLessonInput!): DeleteLessonPayload
  # Deletes a comment from a lesson.
  deleteLessonComment(input: DeleteLessonCommentInput!): DeleteLessonCommentPayload
  # Deletes a study.
  deleteStudy(input: DeleteStudyInput!): DeleteStudyPayload
  # Deletes a user asset.
  deleteUserAsset(input: DeleteUserAssetInput!): DeleteUserAssetPayload
  # Deletes the viewer's account.
  deleteViewerAccount(input: DeleteViewerAccountInput!): ID

  # Gives an apple to an Appleable.
  giveApple(input: GiveAppleInput!): Appleable

  # Returns a token for use in authentication.
  loginUser(input: LoginUserInput!): LoginUserPayload

  # Mark notification as read.
  markNotificationAsRead(input: MarkNotificationAsReadInput!): ID
  # Mark all viewer's notifications as read.
  markAllNotificationsAsRead: Boolean!
  # Mark all viewer's notifications from a study as read.
  markAllStudyNotificationsAsRead(input: MarkAllStudyNotificationAsReadInput!): Boolean!

  # Removes a label from a labelable.
  removeLabel(input: RemoveLabelInput!): RemoveLabelPayload
  # Requests an email verification mail to be sent.
  requestEmailVerification(input: RequestEmailVerificationInput!): EVT
  # Requests a password reset mail to be sent.
  requestPasswordReset(input: RequestPasswordResetInput!): PRT
  # Resets a user's password.
  resetPassword(input: ResetPasswordInput!): Boolean!

  # Takes an apple from an Appleable.
  takeApple(input: TakeAppleInput!): Appleable

  # Updates an email's type.
  updateEmail(input: UpdateEmailInput!): Email
  # Updates the viewer's enrollment status in an Enrollable.
  updateEnrollment(input: UpdateEnrollmentInput!): Enrollable
  # Updates the color and/or description of a label.
  updateLabel(input: UpdateLabelInput!): Label
  # Updates the body and/or title of a lesson.
  updateLesson(input: UpdateLessonInput!): Lesson
  # Updates the body of a lesson comment.
  updateLessonComment(input: UpdateLessonCommentInput!): LessonComment
  # Updates the description of a study.
  updateStudy(input: UpdateStudyInput!): Study
  # Updates the description of a topic.
  updateTopic(input: UpdateTopicInput!): Topic
  # Replaces the topicable's topics with the given topics.
  updateTopics(input: UpdateTopicsInput!): UpdateTopicsPayload
  # Updates the name of a user asset.
  updateUserAsset(input: UpdateUserAssetInput!): UserAsset
  # Updates the login and/or password of the viewer.
  updateViewerAccount(input: UpdateViewerAccountInput!): User
  # Updates the bio, email, and/or name of the viewer.
  updateViewerProfile(input: UpdateViewerProfileInput!): User
}
